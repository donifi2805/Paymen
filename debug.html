<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debugger API Khfy - Pandawa Store</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        pre { background: #1e293b; color: #38bdf8; padding: 15px; border-radius: 10px; overflow-x: auto; font-size: 12px; }
        .tab-active { border-bottom: 2px solid #3b82f6; color: #3b82f6; }
    </style>
</head>
<body class="bg-gray-100 p-4">

    <div class="max-w-2xl mx-auto space-y-4">
        <header class="bg-white p-6 rounded-2xl shadow-sm">
            <h1 class="text-xl font-bold text-gray-800">ðŸ›  Khfy API Simulator</h1>
            <p class="text-sm text-gray-500">Gunakan ini untuk mengetes UI Respon di index.html</p>
        </header>

        <section class="bg-white p-6 rounded-2xl shadow-sm space-y-4">
            <h2 class="font-bold text-gray-700">1. Pilih Skenario Respon</h2>
            <div class="grid grid-cols-2 gap-2">
                <button onclick="simulate('sukses_pulsa')" class="p-3 text-xs bg-green-100 text-green-700 rounded-xl font-bold">Sukses (Pulsa/Data)</button>
                <button onclick="simulate('sukses_pln')" class="p-3 text-xs bg-blue-100 text-blue-700 rounded-xl font-bold">Sukses (Token PLN)</button>
                <button onclick="simulate('pending')" class="p-3 text-xs bg-yellow-100 text-yellow-700 rounded-xl font-bold">Pending (Proses)</button>
                <button onclick="simulate('gagal')" class="p-3 text-xs bg-red-100 text-red-700 rounded-xl font-bold">Gagal (Saldo Tidak Cukup)</button>
            </div>

            <div class="mt-4">
                <label class="block text-xs font-bold text-gray-400 mb-2 uppercase">Raw JSON Response:</label>
                <pre id="jsonPreview">{ "info": "Pilih skenario di atas" }</pre>
            </div>
            
            <button onclick="copyJson()" class="w-full bg-gray-800 text-white py-3 rounded-xl font-bold text-sm">
                <i class="fas fa-copy"></i> Salin JSON ke Clipboard
            </button>
        </section>

        <section class="bg-blue-600 p-6 rounded-2xl shadow-lg text-white">
            <h2 class="font-bold mb-2">Cara Debug ke index.html:</h2>
            <ol class="text-xs space-y-2 list-decimal ml-4 opacity-90">
                <li>Buka file <b>index.html</b> di VS Code/Editor.</li>
                <li>Cari fungsi <b>window.executeApiTransaction</b>.</li>
                <li>Cari baris <code>const result = await callApi('/trx', ...);</code></li>
                <li>Ganti sementara dengan: <br>
                    <code class="bg-blue-800 p-1 rounded">const result = { ok: true, data: PASTE_JSON_DISINI };</code>
                </li>
                <li>Simpan dan lihat bagaimana UI Modal Detail Transaksi muncul.</li>
            </ol>
        </section>
    </div>

    <script>
        const scenarios = {
            sukses_pulsa: {
                status: true,
                message: "Transaksi Berhasil",
                data: {
                    id: "99887722",
                    status: "Success",
                    sn: "SN: 009283748234823. Kuota 10GB Masuk @20/12/25",
                    harga: 12500,
                    tujuan: "08123456789",
                    kode_produk: "XDA10",
                    message: "Trx Sukses. SN: 082348234"
                }
            },
            sukses_pln: {
                status: true,
                message: "Token Berhasil",
                data: {
                    id: "PLN-12345",
                    status: "Success",
                    sn: "1234-5678-9012-3456 / NAMA: BUDI SANTOSO / R1 900VA / 42.5 KWH",
                    harga: 20000,
                    tujuan: "53000000001",
                    kode_produk: "PLN20"
                }
            },
            pending: {
                status: true,
                message: "Transaksi dalam antrian",
                data: {
                    id: "99887755",
                    status: "Pending",
                    sn: "Proses",
                    message: "Transaksi sedang diproses oleh provider"
                }
            },
            gagal: {
                status: false,
                message: "Saldo API Khfy anda tidak mencukupi",
                data: {
                    status: "Gagal",
                    message: "Gagal. Saldo Kurang"
                }
            }
        };

        function simulate(type) {
            const data = scenarios[type];
            document.getElementById('jsonPreview').innerText = JSON.stringify(data, null, 4);
        }

        function copyJson() {
            const text = document.getElementById('jsonPreview').innerText;
            navigator.clipboard.writeText(text).then(() => {
                alert("JSON berhasil disalin! Tempelkan ke kode index.html untuk testing.");
            });
        }
    </script>
</body>
</html>