[
  {
    "snippet": "                        let statusRes = null;\n                        let rawCheckRes = null;\n                        if(system === 'KHFY') {\n                             try {\n                                const cRes = await fetch(`${KHFY_RELAY_URL}?endpoint=/history&${paramsCheck}&_t=${Date.now()}`);\n                                const cJson = await cRes.json();\n                                rawCheckRes = cJson;\n                                \n                                if(cJson.data && Array.isArray(cJson.data.data)) statusRes = cJson.data.data[0];\n                                else if(cJson.data && Array.isArray(cJson.data)) statusRes = cJson.data[0];\n                                else if(cJson.data && cJson.data.data) statusRes = cJson.data.data;\n                                else if(cJson.data) statusRes = cJson.data;\n\n                             } catch(e) { console.log(\"Cek status error\", e); }\n                        } else {\n                             const cRes = await callIcsApi('checkTransaction', { refid: reffId });\n                             rawCheckRes = cRes;\n                             if(cRes.success) statusRes = cRes.data;\n                        }\n\n                        if (rawCheckRes) {\n                            addDebugLog(`Raw Status JSON:<br><pre class=\"mt-1 p-1.5 bg-black/50 border border-white/10 rounded text-yellow-300 text-[8px] whitespace-pre-wrap break-words\">${JSON.stringify(rawCheckRes, null, 2)}</pre>`, 'info', targetLogId);\n                        }",
    "target": "\\s*let statusRes = null;\\s*if\\(system === 'KHFY'\\) \\{[\\s\\S]*?if\\(cRes\\.success\\) statusRes = cRes\\.data;\\s*\\}",
    "action": "replace",
    "regex": true,
    "global": false
  }
]